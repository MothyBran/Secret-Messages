<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Secret Messages â€“ Lizenz-Shop</title>
  <style>
    :root {
      --matrix-green: #00ff41;
      --matrix-dark: #0f0f0f;
      --error-red: #ff0033;
    }
    body {
      background-color: black;
      color: var(--matrix-green);
      font-family: 'Courier New', monospace;
      padding: 20px;
      min-height: 100vh;
    }
    .back-to-login-btn {
      position: absolute;
      top: 20px;
      left: 20px;
      background: transparent;
      border: 1px solid var(--matrix-green);
      color: var(--matrix-green);
      padding: 8px 14px;
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      border-radius: 6px;
      text-decoration: none;
      transition: all 0.3s ease;
    }  
    .back-to-login-btn:hover {
      background-color: var(--matrix-green);
      color: black;
    }
    
    /* Haupt-Shop Container */
    .store-container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 40px 20px;
      text-align: center;
      display: block; /* Standard sichtbar */
    }

    /* Status Container (Versteckt bis zur RÃ¼ckkehr von Stripe) */
    .status-container {
      max-width: 800px;
      margin: 80px auto;
      text-align: center;
      display: none; /* Standard versteckt */
    }

    .license-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 25px;
      margin-top: 20px;
    }
    .license-card {
      background: rgba(0, 0, 0, 0.85);
      border: 1px solid var(--matrix-green);
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 15px var(--matrix-green);
      transition: transform 0.3s ease;
    }
    .license-card:hover {
      transform: scale(1.03);
    }
    .license-title {
      font-size: 1.1rem;
      margin-bottom: 10px;
    }
    .license-price {
      font-size: 1.4rem;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .license-card small {
      display: block;
      margin-bottom: 10px;
      font-size: 0.75rem;
      color: #b2ffb2;
    }
    .license-btn {
      background-color: transparent;
      color: var(--matrix-green);
      border: 1px solid var(--matrix-green);
      padding: 10px 20px;
      font-size: 0.9rem;
      cursor: pointer;
      border-radius: 4px;
      transition: all 0.3s ease;
    }
    .license-btn:hover {
      background-color: var(--matrix-green);
      color: black;
    }
    .matrix-box {
      background: rgba(0, 0, 0, 0.85);
      border: 1px solid var(--matrix-green);
      box-shadow: 0 0 20px var(--matrix-green);
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 40px;
    }
    .matrix-box h2 {
      color: var(--matrix-green);
      text-shadow: 0 0 10px var(--matrix-green);
      margin-bottom: 10px;
    }
    details {
      margin-bottom: 10px;
    }
    summary {
      cursor: pointer;
      font-weight: bold;
    }
    .matrix-footer {
      text-align: center;
      margin-top: 60px;
      border-top: 1px solid var(--matrix-green);
      padding-top: 20px;
      font-size: 0.85rem;
    }
    .matrix-footer a {
      color: var(--matrix-green);
      text-decoration: underline;
    }

    /* Styles fÃ¼r den Status-Screen (Nach Kauf) */
    .status-box {
        background: rgba(0, 0, 0, 0.9);
        border: 2px solid var(--matrix-green);
        padding: 40px;
        border-radius: 10px;
        box-shadow: 0 0 30px var(--matrix-green);
    }
    
    .key-display {
        background: #0f0f0f;
        border: 1px dashed var(--matrix-green);
        padding: 20px;
        margin: 20px 0;
        font-family: 'Courier New', monospace;
        font-size: 1.2rem;
        word-break: break-all;
        color: #fff;
    }

    .copy-btn {
        margin-top: 5px;
        padding: 5px 10px;
        border: 1px solid var(--matrix-green);
        background: black;
        color: var(--matrix-green);
        cursor: pointer;
        font-size: 0.8rem;
    }
    .copy-btn:hover {
        background: var(--matrix-green);
        color: black;
    }

    .spinner {
        display: inline-block;
        width: 40px;
        height: 40px;
        border: 4px solid rgba(0, 255, 65, 0.3);
        border-radius: 50%;
        border-top-color: var(--matrix-green);
        animation: spin 1s ease-in-out infinite;
        margin: 20px auto;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

  </style>
</head>
<body>

  <div class="store-container" id="shop-view">
    <a href="/index.html" class="back-to-login-btn">ğŸ” Zum Login</a>
    <h1>Secret Messages</h1>
    <h2>ğŸ›ï¸ Lizenz-Shop</h2>
    <p class="subtitle">WÃ¤hle dein passendes Lizenzmodell â€“ fair, flexibel & sicher</p>
    
    <div class="license-grid">
      <div style="grid-column: 1/-1; text-align: left;"><h2 style="border-bottom: 1px solid var(--matrix-green); display:inline-block;">Einzelangebote</h2></div>
      
      <div class="license-card">
        <div class="license-title">ğŸ”“ 1 Monat Zugang</div>
        <div class="license-price">1,99 â‚¬</div>
        <button class="license-btn" data-plan="1m">Lizenz kaufen</button>
      </div>
      <div class="license-card">
        <div class="license-title">ğŸ”‘ 3 Monate Zugang</div>
        <div class="license-price">4,49 â‚¬</div>
        <small>ğŸ’¸ Du sparst 1,48â€¯â‚¬</small>
        <button class="license-btn" data-plan="3m">Lizenz kaufen</button>
      </div>
      <div class="license-card">
        <div class="license-title">ğŸ”‘ 12 Monate Zugang</div>
        <div class="license-price">14,99 â‚¬</div>
        <small>ğŸ’¸ Du sparst 8,89â€¯â‚¬</small>
        <button class="license-btn" data-plan="12m">Lizenz kaufen</button>
      </div>
      <div class="license-card">
        <div class="license-title">â™¾ï¸ Unbegrenzter Zugang</div>
        <div class="license-price">49,99 â‚¬</div>
        <small>Lebenslanger Zugang</small>
        <button class="license-btn" data-plan="unlimited">Lizenz kaufen</button>
      </div>

      <div style="grid-column: 1/-1; text-align: left; margin-top: 30px;"><h2 style="border-bottom: 1px solid var(--matrix-green); display:inline-block;">ğŸ“¦ Bundles</h2></div>

      <div class="license-card">
        <div class="license-title">2Ã—ğŸ”‘ 1 Monat Zugang</div>
        <div class="license-price">3,79 â‚¬</div>
        <small>ğŸ’¸ Du sparst 0,19â€¯â‚¬</small>
        <button class="license-btn" data-plan="bundle_1m_2">Bundle kaufen</button>
      </div>
      <div class="license-card">
        <div class="license-title">2Ã—ğŸ”‘ 3 Monate Zugang</div>
        <div class="license-price">7,99 â‚¬</div>
        <small>ğŸ’¸ Du sparst 0,99â€¯â‚¬</small>
        <button class="license-btn" data-plan="bundle_3m_2">Bundle kaufen</button>
      </div>
      <div class="license-card">
        <div class="license-title">5Ã—ğŸ”‘ 3 Monate Zugang</div>
        <div class="license-price">19,99 â‚¬</div>
        <small>ğŸ’¸ Du sparst 2,46â€¯â‚¬</small>
        <button class="license-btn" data-plan="bundle_3m_5">Bundle kaufen</button>
      </div>
      <div class="license-card">
        <div class="license-title">10Ã—ğŸ”‘ 12 Monate Zugang</div>
        <div class="license-price">129,99 â‚¬</div>
        <small>ğŸ’¸ Du sparst 19,91â€¯â‚¬</small>
        <button class="license-btn" data-plan="bundle_1y_10">Bundle kaufen</button>
      </div>
    </div>

    <div style="margin-top: 60px;">
        <section class="matrix-box">
            <h2>ğŸ’¡ Wichtige Informationen zum Lizenz-Key</h2>
            <ul style="text-align: left;">
            <li>ğŸ”“ Zugang nur mit gÃ¼ltigem Lizenz-Key</li>
            <li>ğŸ§ª Keine Registrierung nÃ¶tig â€“ volle AnonymitÃ¤t</li>
            <li>ğŸ“† Keine Abofalle â€“ Key lÃ¤uft automatisch aus</li>
            <li>ğŸ›¡ï¸ Key ist nur einmalig aktivierbar</li>
            </ul>
        </section>  
        
        <section class="matrix-box">
            <h2>â“ HÃ¤ufige Fragen (FAQ)</h2>
            <div style="text-align: left;">
                <details><summary>Was ist ein Lizenz-Key?</summary><p>Ein Lizenz-Key ist ein Zugangscode, der dir exklusiven Zugriff auf das VerschlÃ¼sselungstool von Secret Messages gibt.</p></details>
                <details><summary>Wie lange ist ein Key gÃ¼ltig?</summary><p>Das hÃ¤ngt vom gewÃ¤hlten Paket ab. Die Zeit lÃ¤uft erst ab der Aktivierung im Tool.</p></details>
                <details><summary>Wird der Key automatisch verlÃ¤ngert?</summary><p>Nein! Es gibt keine automatische VerlÃ¤ngerung oder Abo-Fallen.</p></details>
            </div>
        </section>
        
        <section class="matrix-box">
            <h2>ğŸ’³ Zahlungsarten</h2>
            <p>Wir akzeptieren sichere Zahlungen via Stripe (Kreditkarte, Google Pay, Apple Pay).</p>
        </section>

        <section class="matrix-box">
             <h2>ğŸ“ Support</h2>
             <p>Fragen? E-Mail: <a href="mailto:support@secret-messages.com">support@secret-messages.com</a></p>
        </section>
    </div>

    <footer class="matrix-footer">
        <p>Â© 2025 â€“ Secret Messages</p>
    </footer>  
  </div>

  <div id="payment-status-section" class="status-container">
        
        <div id="status-processing" class="status-box">
            <h2>ğŸ” Zahlung wird verifiziert...</h2>
            <div class="spinner"></div>
            <p>Bitte schlieÃŸen Sie dieses Fenster nicht.</p>
            <p style="font-size: 0.8rem; opacity: 0.7;">Wir warten auf die BestÃ¤tigung der Bank...</p>
        </div>

        <div id="status-success" class="status-box" style="display: none;">
            <h1 style="color: var(--matrix-green); font-size: 2.5rem;">âœ… KAUF ERFOLGREICH!</h1>
            <p style="font-size: 1.1rem; margin-top: 10px;">Vielen Dank. Hier sind Ihre Zugangsdaten:</p>
            
            <div id="keys-output-area">
                </div>

            <p style="color: #ffff00; margin-top: 20px;">âš ï¸ <strong>WICHTIG:</strong> Kopieren Sie die Keys JETZT. Sie werden hier nur einmal angezeigt.</p>
            <p>Eine Kopie wurde an Ihre E-Mail gesendet.</p>

            <a href="/index.html?action=activate" class="btn license-btn" style="display: inline-block; margin-top: 30px; text-decoration: none;">ğŸ” Jetzt Zugang aktivieren</a>
            <br><br>
            <a href="/store.html" style="color: #666; font-size: 0.8rem;">ZurÃ¼ck zum Shop</a>
        </div>

        <div id="status-error" class="status-box" style="display: none; border-color: var(--error-red);">
            <h2 style="color: var(--error-red);">âŒ Ein Fehler ist aufgetreten</h2>
            <p id="error-message">Wir konnten Ihre Zahlung nicht automatisch zuordnen.</p>
            <p>Falls Geld abgebucht wurde, kontaktieren Sie bitte den Support mit Ihrer Zahlungs-ID.</p>
            <a href="/store.html" class="btn license-btn" style="border-color: var(--error-red); color: var(--error-red);">ZurÃ¼ck zum Shop</a>
        </div>
  </div>

  <div id="modalOverlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:1000; backdrop-filter: blur(5px);">
    <div id="modalBox" style="max-width:400px; margin:100px auto; background:black; border:1px solid var(--matrix-green); box-shadow:0 0 20px var(--matrix-green); padding:30px; border-radius:10px; text-align:center; color:var(--matrix-green); font-family:'Courier New', monospace;">
      <h2 style="margin-bottom: 15px; text-shadow: 0 0 10px var(--matrix-green);">ğŸ›’ Kauf bestÃ¤tigen</h2>
      <p id="modalPlan" style="margin-bottom: 5px; font-size: 1.1rem; font-weight: bold;"></p>
      <p id="modalPrice" style="margin-bottom: 25px; font-size: 1.4rem; color: white;"></p>
      
      <div style="text-align: left; margin-bottom: 5px; font-size: 0.8rem;">Ihre E-Mail (fÃ¼r den Empfang der Keys):</div>
      <input type="email" id="emailInput" placeholder="name@beispiel.de" style="width: 100%; padding: 12px; margin-bottom: 20px; background: #0f0f0f; color: var(--matrix-green); border: 1px solid var(--matrix-green); border-radius: 4px; font-family: 'Courier New', monospace; box-sizing: border-box;" />
      
      <button id="confirmPurchaseBtn" style="width: 100%; margin-bottom: 10px; padding: 12px; border: 1px solid var(--matrix-green); background: var(--matrix-green); color: black; font-weight: bold; cursor: pointer; transition: all 0.2s;">ZUR KASSE (Stripe)</button>
      <button id="closeModalBtn" style="width: 100%; padding: 10px; border: 1px solid #555; background: transparent; color: #888; cursor: pointer;">Abbrechen</button>
    </div>
  </div>

  <script src="store.js"></script>
  <script src="https://js.stripe.com/v3/"></script>
</body>
</html>
